## 동시성 제어 방식
### 서론
사용자 포인트를 관리하는 기능을 구현하였다. 동시에 여러 요청이 올 경우 포인트를 충전하거나 사용할 때 동시성 제어가 필요했다.
동시성을 고려하는 방법으로는 Synchronize 방식과 Lock 방식 두가지를 고려했었다.

### Synchronize 방식
포인트를 충전하거나 사용하는 함수를 Synchronize 하게 만들면 동시에 들어온 요청에대해서 한번에 하나의 스레드만 수행하도록 만들 수 있다.

하지만 이럴경우, 유저 A가 포인트를 사용하는 요청을 처리할때 유저 B는 포인트 사용을 위해 유저 A의 요청이 처리 완료되길 기다려야한다. Synchronize 방식은 동시성 제어를 함수레벨에 적용하기때문에 이런 성능 문제가 있다고 판단했다.

### Lock 방식
유저의 아이디를 key로하고 Lock을 value로 하는 Map을 생성했다. 유저의 아이디별로 Lock을 관리하기에 Synchronize에서 발생한 A유저의 충전 요청중에도 B유저 역시 충전 요청을 수행할 수 있다.

### 결론
두 방식 모두 동시성 제어를 할 수 있지만 사용할수있는 시나리오가 차이가 있어보인다. 모든 스레드들에 대해 함수 레벨에서 동시성을 반드시 제어해야한다면 Synchronize를 고려할 수 있겠지만 지금처럼 유저별로 동시성을 제어해야한다면 Lock을 이용한 방식이
올바른 방식이다.
